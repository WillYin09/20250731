# 部署安全指南

## 🚨 重要安全提醒

### 1. API密钥安全
- **永远不要**将真实的API密钥提交到Git仓库
- 使用环境变量管理所有敏感信息
- 在生产环境中通过云平台的环境变量功能设置密钥

### 2. 环境变量配置

#### 开发环境
```bash
# 复制示例文件
cp env.example .env.local

# 编辑 .env.local 文件，填入真实密钥
ALIYUN_QWEN_API_KEY=your_real_qwen_key
NEXT_PUBLIC_SILICONFLOW_API_TOKEN=your_real_deepseek_token
```

#### 生产环境
在云平台控制台中设置环境变量：
- `ALIYUN_QWEN_API_KEY`
- `NEXT_PUBLIC_SILICONFLOW_API_TOKEN`

### 3. 代码安全检查清单

- [ ] 确认没有硬编码的API密钥
- [ ] 确认没有硬编码的数据库连接字符串
- [ ] 确认没有硬编码的用户名密码
- [ ] 确认环境变量文件已添加到 .gitignore
- [ ] 确认生产环境密钥已正确设置

### 4. 部署前检查

```bash
# 检查是否有敏感信息泄露
grep -r "sk-" .
grep -r "Bearer " .
grep -r "password" .
grep -r "secret" .
```

### 5. 安全最佳实践

1. **使用HTTPS**：确保生产环境使用SSL证书
2. **定期轮换密钥**：定期更换API密钥
3. **监控异常访问**：关注API调用频率和异常
4. **数据备份**：定期备份用户数据
5. **日志管理**：不要在生产日志中记录敏感信息

## 🔒 合规性考虑

### 国内部署注意事项

1. **数据本地化**：用户数据存储在国内服务器
2. **API服务合规**：使用国内可访问的AI服务
3. **隐私政策**：制定符合国内法规的隐私政策
4. **用户协议**：明确用户数据使用范围

### 风险评估

- ✅ **低风险**：项目只使用国内AI服务
- ✅ **低风险**：无VPN相关配置
- ⚠️ **中风险**：用户数据存储需要合规
- ⚠️ **中风险**：需要制定隐私政策

## 📋 部署检查清单

### 代码安全
- [ ] 无硬编码密钥
- [ ] 环境变量正确配置
- [ ] 敏感文件已忽略

### 服务器安全
- [ ] 防火墙配置
- [ ] SSL证书安装
- [ ] 定期安全更新

### 数据安全
- [ ] 数据加密存储
- [ ] 访问权限控制
- [ ] 备份策略

### 合规性
- [ ] 隐私政策
- [ ] 用户协议
- [ ] 数据保护措施 